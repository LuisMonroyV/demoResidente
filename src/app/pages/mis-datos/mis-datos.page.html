<app-header titulo="Mis Datos"></app-header>

<ion-content class="ion-padding">
<form (ngSubmit)="guardarCambios()"
      novalidate="novalidate"
      #formDatos="ngForm">
  <ion-card>
    <ion-list>
      <ion-item lines="none">
        <ion-icon name="person-circle-sharp" slot="start"></ion-icon>
        <ion-label color="medium">{{fbSrvc.persona.nombres + ' ' + fbSrvc.persona.apellidoPaterno + ' ' + fbSrvc.persona.apellidoMaterno}}</ion-label>
      </ion-item>
      <ion-item lines="none">
        <ion-icon name="mail-open-sharp" slot="start"></ion-icon>
        <ion-label color="medium">{{fbSrvc.persona.email}}</ion-label>
      </ion-item>
      <ion-item>
        <ion-icon name="phone-portrait-sharp" slot="start" color="primary"></ion-icon>
        <ion-input type="text"
                   name="movil"
                   [(ngModel)]="fbSrvc.persona.movil" 
                   mode="ios"
                   #movilInput
                   >
        </ion-input>
        <!-- <ion-icon slot="end" name="pencil-sharp" color="warning"></ion-icon> -->
      </ion-item>
    </ion-list>  
  </ion-card>

  <ion-card>
    <ion-list>
      <ion-item lines="none">
        <ion-icon name="home-sharp" slot="start"></ion-icon>
        <ion-label color="medium">{{fbSrvc.persona.calle}} {{fbSrvc.persona.numero}}</ion-label>
      </ion-item>
      <ion-item>
        <ion-icon name="call-sharp" slot="start" color="primary"></ion-icon>
        <ion-input type="text"
                   name="fono"
                   [(ngModel)]="fbSrvc.persona.telefono" 
                   mode="ios"
                   >
        </ion-input>
        <!-- <ion-icon slot="end" name="pencil-sharp" color="warning"></ion-icon> -->
      </ion-item>
      <ion-item>
        <ion-icon name="megaphone-sharp" slot="start" color="primary"></ion-icon>
        <ion-label position="stacked">Código botón de pánico</ion-label>
        <ion-input type="text"
                   name="codigo"
                   [(ngModel)]="fbSrvc.parametros.codigoAlerta" 
                   pattern="[0-9]{3}"
                   required
                   maxlength="3"
                   placeholder="_0_0_0_"
                   mode="ios"
                   >
        </ion-input>
        <!-- <ion-icon slot="end" name="pencil-sharp" color="warning"></ion-icon> -->
      </ion-item>
    </ion-list>  
  </ion-card>

  <ion-card>
    <ion-list>
      <ion-item lines="none">
        <ion-icon slot="start" color="success" name="thumbs-up-sharp"></ion-icon>
        <ion-label>Visitas Autorizadas</ion-label>
        <ion-icon slot="end" size="large" name="add-circle-sharp" color="primary" (click)="modalVisita('Autorizada')"></ion-icon>
      </ion-item>      
      <ion-item lines="none" *ngFor="let item of misVisitas.autorizados; let i = index">
        <ion-text>{{i+1}}.- {{item}}</ion-text>
        <ion-icon slot="end" color="danger" name="close-circle-sharp" (click)="confirmacion(i, 'Autorizada')"></ion-icon>
      </ion-item>
    </ion-list>  
  </ion-card>

  <ion-card>
    <ion-list>
      <ion-item lines="none">
        <ion-icon slot="start" color="danger" name="thumbs-down-sharp"></ion-icon>
        <ion-label>Visitas NO Autorizadas</ion-label>
        <ion-icon slot="end" size="large" name="add-circle-sharp" color="primary" (click)="modalVisita('NO Autorizada')"></ion-icon>
        </ion-item>      
        <ion-item lines="none" *ngFor="let item of misVisitas.rechazados; let j = index">
          <ion-text>{{j+1}}.- {{item}}</ion-text>
          <ion-icon slot="end" color="danger" name="close-circle-sharp" (click)="confirmacion(j, 'NO Autorizada')"></ion-icon>
        </ion-item>
    </ion-list>  
  </ion-card>
  <ion-button type="submit"
              expand="block" 
              [disabled]="!formDatos.valid || guardando"
              >
    Guardar Cambios
  </ion-button>
  <ion-ripple-effect type="bounded"></ion-ripple-effect>
</form>
</ion-content>
